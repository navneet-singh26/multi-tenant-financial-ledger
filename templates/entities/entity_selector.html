
<div class="entity-selector dropdown">
    <button class="btn btn-outline-primary dropdown-toggle" type="button" id="entityDropdown" data-bs-toggle="dropdown" aria-expanded="false">
        {% if current_entity %}
            <i class="bi bi-building"></i> {{ current_entity.name }}
        {% else %}
            <i class="bi bi-building"></i> Select Entity
        {% endif %}
    </button>
    <ul class="dropdown-menu" aria-labelledby="entityDropdown">
        {% for entity in entities %}
            <li>
                <a class="dropdown-item {% if current_entity and entity.id == current_entity.id %}active{% endif %}" 
                   href="?entity_id={{ entity.id }}">
                    <div class="d-flex justify-content-between align-items-center">
                        <span>{{ entity.name }}</span>
                        <small class="text-muted">{{ entity.entity_type|title }}</small>
                    </div>
                </a>
            </li>
        {% empty %}
            <li><span class="dropdown-item text-muted">No entities available</span></li>
        {% endfor %}
        <li><hr class="dropdown-divider"></li>
        <li>
            <a class="dropdown-item" href="{% url 'entity-create' %}">
                <i class="bi bi-plus-circle"></i> Create New Entity
            </a>
        </li>
    </ul>
</div>

<style>
.entity-selector .dropdown-menu {
    min-width: 300px;
}

.entity-selector .dropdown-item {
    padding: 0.5rem 1rem;
}

.entity-selector .dropdown-item:hover {
    background-color: #f8f9fa;
}

.entity-selector .dropdown-item.active {
    background-color: #0d6efd;
    color: white;
}
</style>